<html>
  <head>
    <script src="aframe.min.js"></script>
    <script src="aframe-heatmap3d.js"></script>
	<script src="stackblur.min.js"></script>
    <script src="d3.js"></script>
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
    <!-- Event-set component : https://aframe.io/docs/1.1.0/introduction/interactions-and-controllers.html#handling-events-with-event-set-component -->
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
  </head>

<body>
<script type="text/javascript">    
function renderPDF(url, canvas, options) {
    // SEE: https://mozilla.github.io/pdf.js/examples/
    var options = options || { scale: 1 };
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://mozilla.github.io/pdf.js/build/pdf.worker.js'
    var loadingTask = pdfjsLib.getDocument(url);
    loadingTask.promise.then(function(pdf) {
        pdf.getPage(1).then(function(page) {
            console.log('loaded page');
            var scale = 0.8;
            var viewport = page.getViewport({ scale: scale, });
            var ctx = canvas.getContext('2d');
            var renderContext = {
                canvasContext: ctx,
                viewport: viewport
            };
            page.render(renderContext);
        });
    });
}   
</script> 

<a-scene>      
    <a-entity xr="ar:false; vr:true; magicWindow:false"></a-entity>
    <a-assets>
        <img id="fun4" src="fun_4.jpg"/>    
    </a-assets>
    <a-camera>
         <a-cursor raycaster="far:20; interval:1000; objects: .clickable"></a-cursor> 
              <a-plane 
                id="patentText"
                position="0 0 -1.5" 
                rotation="0 0 0" 
                width= "1.5" 
                height= "2"
                visible="false"
                material="src: #holder; opacity: 0.75; transparent: true"
            ></a-plane>
    </a-camera>
    <a-box id="patentLandmark" 
        position="-1 0.5 -3" 
        rotation="0 0 0" 
        color="#4CC3D9" 
        visible="true"
        class="clickable"
        width="0.25" height="0.25" depth="0.25"
        event-set__enter="_event: mouseenter; _target: #patentText; visible: true"
        event-set__leave="_event: mouseleave; _target: #patentText; visible: false">
    </a-box>   
    <a-sky color="#ECECEC"></a-sky>

    <!-- Make the finess landscape -->
    <a-entity	
        id="patentLandscape"
        visible="true"
        aframe-heatmap3d="
			src: #fun4;
			srcMobile: #fun4;
			ignoreZeroValues:false; 
			invertElevation:false;
			palette:parula;
			metalness:.2;
			roughness:0;
			stackBlurRadius:1;		
			stretch:true;
			flipPalette:false; 
			renderMode: surface;
			scaleOpacity: false;
			scaleOpacityMethod:log2;
			opacityMin: 0.29; 
			width:10; height:10;" scale="1 1 1">
    </a-entity>	

</a-scene>
   
<div id ="page" class="true">
<canvas id='holder' width='500' height='650' hidden='false'></canvas>
</div>
<script type="text/javascript">
    var url =  'https://svalver.github.io/papers/PATH_HORIZON_2004.pdf';
     renderPDF(url, document.getElementById('holder'));
</script> 

</body>
</html>