<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDFs Example</title>
</head>
<body>

<h1>PDF Examples</h1>

<div>
    <h2>PDF 1: 'The many ways toward punctuated evolution'</h2>
    <canvas id="canvas1" style="border: 1px solid black; direction: ltr;"></canvas>
</div>

<div>
    <h2>PDF 2: 'On the multiscale dynamics of punctuated evolution'</h2>
    <canvas id="canvas2" style="border: 1px solid black; direction: ltr;"></canvas>
</div>

<div>
    <h2>PDF 3: 'Networks: The Visual Language of Complexity'</h2>
    <canvas id="canvas3" style="border: 1px solid black; direction: ltr;"></canvas>
</div>

<script src="pdfjs/build/pdf.mjs" type="module"></script>
<script id="script" type="module">
    // Define an array of PDF files and canvas IDs
    const pdfs = [
        { url: 'papers/2024_many_pe.pdf', canvasId: 'canvas1' },
        { url: 'papers/2024_multiscale_pe.pdf', canvasId: 'canvas2' },
        { url: 'papers/2024_networks.pdf', canvasId: 'canvas3' }
    ];

    pdfjsLib.GlobalWorkerOptions.workerSrc = 'pdfjs/build/pdf.worker.mjs';

    // Function to load and render each PDF
    async function loadAndRenderPDF(pdfUrl, canvasId) {
        const loadingTask = pdfjsLib.getDocument(pdfUrl);
        const pdf = await loadingTask.promise;
        const page = await pdf.getPage(1);
        const scale = 1.5;
        const viewport = page.getViewport({ scale });
        const outputScale = window.devicePixelRatio || 1;

        const canvas = document.getElementById(canvasId);
        const context = canvas.getContext('2d');
        canvas.width = Math.floor(viewport.width * outputScale);
        canvas.height = Math.floor(viewport.height * outputScale);
        canvas.style.width = Math.floor(viewport.width) + "px";
        canvas.style.height = Math.floor(viewport.height) + "px";
        
        const transform = outputScale !== 1 ? [outputScale, 0, 0, outputScale, 0, 0] : null;

        const renderContext = {
            canvasContext: context,
            transform,
            viewport,
        };

        page.render(renderContext);
    }

    // Loop through the array and render all PDFs
    pdfs.forEach(pdf => loadAndRenderPDF(pdf.url, pdf.canvasId));
</script>

</body>
</html>
